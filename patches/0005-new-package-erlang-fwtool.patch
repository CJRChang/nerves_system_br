From cb0124af8a995e49a55393c915d5ac826a7b8c64 Mon Sep 17 00:00:00 2001
From: Frank Hunleth <fhunleth@troodon-software.com>
Date: Tue, 29 Oct 2013 14:55:17 -0400
Subject: [PATCH 5/9] new package: erlang-fwtool

---
 package/Config.in.host                 |  1 +
 package/erlang-fwtool/Config.in.host   |  9 +++++++++
 package/erlang-fwtool/erlang-fwtool.mk | 26 ++++++++++++++++++++++++++
 3 files changed, 36 insertions(+)
 create mode 100644 package/erlang-fwtool/Config.in.host
 create mode 100644 package/erlang-fwtool/erlang-fwtool.mk

diff --git a/package/Config.in.host b/package/Config.in.host
index 5b3ccb4..b1e0bbd 100644
--- a/package/Config.in.host
+++ b/package/Config.in.host
@@ -4,6 +4,7 @@ source "package/am335x-pru-package/Config.in.host"
 source "package/dfu-util/Config.in.host"
 source "package/dosfstools/Config.in.host"
 source "package/e2fsprogs/Config.in.host"
+source "package/erlang-fwtool/Config.in.host"
 source "package/erlang-rebar/Config.in.host"
 source "package/erlang-relx/Config.in.host"
 source "package/genext2fs/Config.in.host"
diff --git a/package/erlang-fwtool/Config.in.host b/package/erlang-fwtool/Config.in.host
new file mode 100644
index 0000000..40f5413
--- /dev/null
+++ b/package/erlang-fwtool/Config.in.host
@@ -0,0 +1,9 @@
+config BR2_PACKAGE_HOST_ERLANG_FWTOOL
+	bool "host erlang-fwtool"
+	depends on BR2_PACKAGE_ERLANG
+	select BR2_PACKAGE_HOST_ERLANG_REBAR
+	help
+	  A firmware packaging and programming tool
+	  written in Erlang.
+
+	  http://github.com/nerves-project/fwtool
diff --git a/package/erlang-fwtool/erlang-fwtool.mk b/package/erlang-fwtool/erlang-fwtool.mk
new file mode 100644
index 0000000..674dea3
--- /dev/null
+++ b/package/erlang-fwtool/erlang-fwtool.mk
@@ -0,0 +1,26 @@
+#############################################################
+#
+# erlang-fwtool
+#
+#############################################################
+
+ERLANG_FWTOOL_VERSION = c37a19813e0c7e031f6c66c5a86ebf3254124253
+ERLANG_FWTOOL_SITE = $(call github,nerves-project,fwtool,$(ERLANG_FWTOOL_VERSION))
+ERLANG_FWTOOL_LICENSE = MIT
+ERLANG_FWTOOL_LICENSE_FILE = LICENSE.md
+
+HOST_ERLANG_FWTOOL_DEPENDENCIES = host-erlang host-erlang-rebar
+
+# Macro for invoking relx in other packages
+FWTOOL = $(HOST_MAKE_ENV) \
+	$(HOST_DIR)/usr/bin/fwtool
+
+define HOST_ERLANG_FWTOOL_BUILD_CMDS
+	$(HOST_MAKE_ENV) $(MAKE1) -C $(@D)
+endef
+
+define HOST_ERLANG_FWTOOL_INSTALL_CMDS
+	cp $(@D)/fwtool $(HOST_DIR)/usr/bin
+endef
+
+$(eval $(host-generic-package))
-- 
1.8.3.2

