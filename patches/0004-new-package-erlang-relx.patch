From 23c4af652d93981b5915b8d28a1ffb5fb64959ea Mon Sep 17 00:00:00 2001
From: Frank Hunleth <fhunleth@troodon-software.com>
Date: Tue, 29 Oct 2013 14:54:19 -0400
Subject: [PATCH 4/9] new package: erlang-relx

---
 package/Config.in.host             |  1 +
 package/erlang-relx/Config.in.host |  8 ++++++++
 package/erlang-relx/erlang-relx.mk | 26 ++++++++++++++++++++++++++
 3 files changed, 35 insertions(+)
 create mode 100644 package/erlang-relx/Config.in.host
 create mode 100644 package/erlang-relx/erlang-relx.mk

diff --git a/package/Config.in.host b/package/Config.in.host
index 80a795d..0f60aea 100644
--- a/package/Config.in.host
+++ b/package/Config.in.host
@@ -5,6 +5,7 @@ source "package/dfu-util/Config.in.host"
 source "package/dosfstools/Config.in.host"
 source "package/e2fsprogs/Config.in.host"
 source "package/erlang-rebar/Config.in.host"
+source "package/erlang-relx/Config.in.host"
 source "package/genext2fs/Config.in.host"
 source "package/genimage/Config.in.host"
 source "package/genpart/Config.in.host"
diff --git a/package/erlang-relx/Config.in.host b/package/erlang-relx/Config.in.host
new file mode 100644
index 0000000..9d59bae
--- /dev/null
+++ b/package/erlang-relx/Config.in.host
@@ -0,0 +1,8 @@
+config BR2_PACKAGE_HOST_ERLANG_RELX
+	bool "host erlang-relx"
+	depends on BR2_PACKAGE_ERLANG
+	select BR2_PACKAGE_HOST_ERLANG_REBAR
+	help
+	  A release assembler for Erlang.
+
+	  http://github.com/erlware/relx
diff --git a/package/erlang-relx/erlang-relx.mk b/package/erlang-relx/erlang-relx.mk
new file mode 100644
index 0000000..ac1e005
--- /dev/null
+++ b/package/erlang-relx/erlang-relx.mk
@@ -0,0 +1,26 @@
+#############################################################
+#
+# erlang-relx
+#
+#############################################################
+
+ERLANG_RELX_VERSION = 10620765c5028c24d57caba20b8e86b98351e3a5
+ERLANG_RELX_SITE = $(call github,erlware,relx,$(ERLANG_RELX_VERSION))
+ERLANG_RELX_LICENSE = Apache-2.0
+ERLANG_RELX_LICENSE_FILE = LICENSE.md
+
+HOST_ERLANG_RELX_DEPENDENCIES = host-erlang host-erlang-rebar
+
+# Macro for invoking relx in other packages
+RELX = $(HOST_MAKE_ENV) \
+	$(HOST_DIR)/usr/bin/relx -l $(STAGING_DIR)/usr/lib/erlang/lib
+
+define HOST_ERLANG_RELX_BUILD_CMDS
+	$(HOST_MAKE_ENV) $(MAKE1) -C $(@D)
+endef
+
+define HOST_ERLANG_RELX_INSTALL_CMDS
+	cp $(@D)/relx $(HOST_DIR)/usr/bin
+endef
+
+$(eval $(host-generic-package))
-- 
1.8.3.2

